(function () {
	'use strict';

	(function(){(function(c,d){return d={exports:{}},c(d,d.exports),d.exports})(function(c){(function(){function d(w){return Array.prototype.slice.call(w)}function e(w){return new Promise(function(x,y){w.onsuccess=function(){x(w.result);},w.onerror=function(){y(w.error);};})}function f(w,x,y){var z,A=new Promise(function(B,C){z=w[x].apply(w,y),e(z).then(B,C);});return A.request=z,A}function g(w,x,y){var z=f(w,x,y);return z.then(function(A){return A?new n(A,z.request):void 0})}function h(w,x,y){y.forEach(function(z){Object.defineProperty(w.prototype,z,{get:function(){return this[x][z]},set:function(A){this[x][z]=A;}});});}function j(w,x,y,z){z.forEach(function(A){A in y.prototype&&(w.prototype[A]=function(){return f(this[x],A,arguments)});});}function k(w,x,y,z){z.forEach(function(A){A in y.prototype&&(w.prototype[A]=function(){return this[x][A].apply(this[x],arguments)});});}function l(w,x,y,z){z.forEach(function(A){A in y.prototype&&(w.prototype[A]=function(){return g(this[x],A,arguments)});});}function m(w){this._index=w;}function n(w,x){this._cursor=w,this._request=x;}function o(w){this._store=w;}function q(w){this._tx=w,this.complete=new Promise(function(x,y){w.oncomplete=function(){x();},w.onerror=function(){y(w.error);},w.onabort=function(){y(w.error);};});}function s(w,x,y){this._db=w,this.oldVersion=x,this.transaction=new q(y);}function t(w){this._db=w;}h(m,'_index',['name','keyPath','multiEntry','unique']),j(m,'_index',IDBIndex,['get','getKey','getAll','getAllKeys','count']),l(m,'_index',IDBIndex,['openCursor','openKeyCursor']),h(n,'_cursor',['direction','key','primaryKey','value']),j(n,'_cursor',IDBCursor,['update','delete']),['advance','continue','continuePrimaryKey'].forEach(function(w){w in IDBCursor.prototype&&(n.prototype[w]=function(){var x=this,y=arguments;return Promise.resolve().then(function(){return x._cursor[w].apply(x._cursor,y),e(x._request).then(function(z){return z?new n(z,x._request):void 0})})});}),o.prototype.createIndex=function(){return new m(this._store.createIndex.apply(this._store,arguments))},o.prototype.index=function(){return new m(this._store.index.apply(this._store,arguments))},h(o,'_store',['name','keyPath','indexNames','autoIncrement']),j(o,'_store',IDBObjectStore,['put','add','delete','clear','get','getAll','getKey','getAllKeys','count']),l(o,'_store',IDBObjectStore,['openCursor','openKeyCursor']),k(o,'_store',IDBObjectStore,['deleteIndex']),q.prototype.objectStore=function(){return new o(this._tx.objectStore.apply(this._tx,arguments))},h(q,'_tx',['objectStoreNames','mode']),k(q,'_tx',IDBTransaction,['abort']),s.prototype.createObjectStore=function(){return new o(this._db.createObjectStore.apply(this._db,arguments))},h(s,'_db',['name','version','objectStoreNames']),k(s,'_db',IDBDatabase,['deleteObjectStore','close']),t.prototype.transaction=function(){return new q(this._db.transaction.apply(this._db,arguments))},h(t,'_db',['name','version','objectStoreNames']),k(t,'_db',IDBDatabase,['close']),['openCursor','openKeyCursor'].forEach(function(w){[o,m].forEach(function(x){x.prototype[w.replace('open','iterate')]=function(){var y=d(arguments),z=y[y.length-1],A=this._store||this._index,B=A[w].apply(A,y.slice(0,-1));B.onsuccess=function(){z(B.result);};};});}),[m,o].forEach(function(w){w.prototype.getAll||(w.prototype.getAll=function(x,y){var z=this,A=[];return new Promise(function(B){z.iterateCursor(x,function(C){return C?(A.push(C.value),void 0!==y&&A.length==y?void B(A):void C.continue()):void B(A)});})});});c.exports={open:function(w,x,y){var z=f(indexedDB,'open',[w,x]),A=z.request;return A.onupgradeneeded=function(B){y&&y(new s(A.result,B.oldVersion,A.transaction));},z.then(function(B){return new t(B)})},delete:function(w){return f(indexedDB,'deleteDatabase',[w])}};})();});})();

}());
